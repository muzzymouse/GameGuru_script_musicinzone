# GameGuru script musicinzone
![](https://img.shields.io/badge/GameGuru-1.111-orange.svg)

Измененный скрипт "musicinzone.lua" для использования в SoundZone.
Позволяет многократно воспроизводить звуковой файл пока игровой персонаж находится в Sound Zone.
## Что не так со стандартным скриптом?
Идущий в комплекте GameGuru скрипт "musicinzone.lua", подставляемый в Sound Zone имеет несколько странное (на мой взгляд) поведение. При попадании игрового персонажа в Sound Zone с подключенным к этой зоне скриптом "musicinzone.lua" происходит всего лишь одноразовое проигрывание указанного в настройках звукового файла. Таким образом, поведение скрипта "musicinzone.lua" ничем не отличается от поведения скрипта "soundinzone.lua". Ко всему прочему, в обоих указанных скриптах звуковой файл проигрывается только единожды. Сколько бы игровой персонаж не входил и не выходил из зоны, звуковой файл проигрываться не будет.

Взглянув на исходные коды скриптов "musicinzone.lua" и "soundinzone.lua" можно увидеть кое-что интересное:

musicinzone.lua
```
function musicinzone_main(e)
 if g_Entity[e]['plrinzone']==1 then
  LoopSound(e,0)
  ActivateIfUsed(e)
 end
end
```
soundinzone.lua
```
function soundinzone_main(e)
 if g_Entity[e]['plrinzone']==1 then
  PlaySound(e,0)
  Destroy(e)
  ActivateIfUsed(e)
 end
end
```

Оказывается, при попадании в Sound Zone с подключенным к этой зоне скриптом "musicinzone.lua" звуковой файл должен неоднократно повторяться функцией LoopSound(e,0), но на практике этого не происходит.

Таким образом, при помощи стандартного скрипта "musicinzone.lua" не получится воссоздать, например, звуки леса, реки, автострады или шум города.

## Решение
Предлагаемый измененный скрипт "musicinzone.lua" позволяет многократно воспроизводить указываемый в настройках звуковой файл пока игровой персонаж находится в Sound Zone. Данная версия скрипта идеально подходит для воссоздания в играх звукового сопровождения окружающего и сопровождающего игрового персонажа, пока тот находится в определенной зоне.

## Установка
Для установки скрипта скопируйте содержимое папки "scriptbank" в соответствующую директорию в "GameGuru\Files\scriptbank\". При этом стандартный скрипт "musicinzone.lua" будет заменен на новый. Если по какой-либо причине понадобится вернуть все обратно, то в комплекте идет копия оригинального скрипта "musicinzone.lua" - "musicinzone.lua.bak". 
